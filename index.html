<!doctype html>
<html class="no-js">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width; initial-scale=1.0">

	<title>Head JS :: The only script in your HEAD</title>
	<meta name="description" content="Load scripts like images. Use HTML5 and CSS3 safely. Target CSS for different screens, paths, states and browsers. Make it the only script in your HEAD. A concise solution to universal issues.">
	<meta name="keywords" content="labjs, modernizr, parallel script loading, javascript loader, non-blocking javascript, javascript modernizer">	
	<meta name="author" content="tipiirai (Tero Piirainen)">	
		
	<script src="media/js/head.min.js?v=2"></script>
	
	<!-- include the stylesheet after headjs -->
	<link rel="stylesheet" href="media/css/style.css?v=0.3"> 
	<link rel="icon" type="image/gif" href="media/img/favicon.gif?v=1">
	
</head>


<body>

	
	<a href="http://github.com/headjs/headjs">
		<img id="fork" alt="Fork me on GitHub" 
			src="media/img/forkme.png">
	</a>

	<div id="wrap">			

		

<nav>
	<a href="#highlights">highlights</a>
	<a href="#theory">theory</a>
	<a href="#usage">usage</a>
	<a href="#api">api</a>
	<a href="#download">download <strong> (v 0.9)</strong></a>
</nav>

<div id="hero">
   <h1>HEAD<em>JS</em></h1>
   
   <h2>The only script in your &lt;HEAD&gt;</h2>
   
   <h3>A tiny script that speeds up, simplifies and modernizes your site</h3>

	<p>
		Load scripts like images. Use HTML5 and CSS3 safely. Target CSS for different screens, paths, states and browsers. Make it the only script in your HEAD. A concise solution to universal issues.  <a href="#theory">the theory &raquo;</a>
	</p>
   
</div>


	
		<div id="content" class="clear">
			<h1>Highlights</h1>
<section id="highlights">

<h2>JavaScript loader</h2>
<p>Load scripts in parallel but execute in order</p>
<div class="code"><div class="highlight"><pre><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;/path/to/jquery.js&quot;</span><span class="p">,</span> <span class="s2">&quot;/google/analytics.js&quot;</span><span class="p">,</span> <span class="s2">&quot;/js/site.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br />   <span class="c1">// all done</span><br />   <br /><span class="p">});</span><br /></pre></div><br /></div>

<p>Head JS loads JavaScript files like images without <em>blocking</em> the page. Your page will be faster even with a single combined file.</p>
<h2>JavaScript organizer</h2>
<p>You've read the books and placed SCRIPT SRC tags on the bottom. Good. But can you do this?</p>
<div class="code"><div class="highlight"><pre><span class="c1">// use jQuery on the body of the page even though it is not included yet</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;#my&quot;</span><span class="p">).</span><span class="nx">jquery_plugin</span><span class="p">();</span><br /><span class="p">});</span><br />&nbsp;<br /><span class="c1">// load jQuery whenever you wish bottom of the page</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;/path/to/jquery.js&quot;</span><span class="p">);</span>  <br /></pre></div><br /></div>

<h2>CSS modernizer</h2>
<p>HeadJS adds classes to the HTML root element so that you can do this</p>
<div class="code"><div class="highlight"><pre><span class="c">/* target CSS for browsers without box-shadow support */</span><br /><span class="nc">.no-boxshadow</span> <span class="nc">.box</span> <span class="p">{</span><br />   <span class="k">border</span><span class="o">:</span> <span class="m">2px</span> <span class="k">solid</span> <span class="m">#ddd</span><span class="p">;</span><br /><span class="p">}</span><br /></pre></div><br /></div>

<p>The focus is on <em>CSS3 styling</em> and it's easy to add more tests. Minimalism is a must. It's your HEAD again. </p>
<h2>HTML5 enabler</h2>
<p>DIV is good but HeadJS let's you be semantic and futuristic</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;style&gt;</span><br />   <span class="nt">article</span> <span class="p">{</span> <span class="k">text-shadow</span><span class="o">:</span><span class="m">0</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">#ccc</span><span class="p">;</span> <span class="p">}</span><br /><span class="nt">&lt;/style&gt;</span><br />&nbsp;<br /><span class="c">&lt;!-- works in IE too --&gt;</span><br /><span class="nt">&lt;article&gt;</span><br />   <span class="nt">&lt;header&gt;&lt;/header&gt;</span><br />   <span class="nt">&lt;section&gt;&lt;/section&gt;</span><br />   <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span><br /><span class="nt">&lt;/article&gt;</span><br /></pre></div><br /></div>

<h2>Screen size detector</h2>
<p>Design pages for <strong>1980px</strong> wide screen and make it also work on <strong>10"</strong> laptops and mobile phones. 
Viewport is the most important thing when developing for mobile clients.</p>
<div class="code"><div class="highlight"><pre><span class="c">/* screen size less than 1024 pixels */</span><br /><span class="nc">.lt-1024</span> <span class="nf">#hero</span> <span class="p">{</span> <span class="k">background-image</span><span class="o">:</span><span class="p">(</span><span class="k">medium</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span> <span class="p">}</span><br />&nbsp;<br /><span class="c">/* fine tune for mobile phone */</span><br /><span class="nc">.lt-640</span> <span class="nf">#hero</span> <span class="p">{</span> <span class="k">background-image</span><span class="o">:</span><span class="p">(</span><span class="n">small</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span> <span class="p">}</span><br /></pre></div><br /></div>

<p>If you resize the browser window your CSS rules will dynamically follow. Head JS does it behind the scenes.</p>
<h2>Dynamic CSS</h2>
<p>Style for various application states</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span><br /><span class="cm">/* detect whether user is logged in. here we check for an existence of a cookie */</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">feature</span><span class="p">(</span><span class="s2">&quot;logged&quot;</span><span class="p">,</span> <span class="nx">mycookielib</span><span class="p">.</span><span class="nx">get_cookie</span><span class="p">(</span><span class="s2">&quot;auth_token&quot;</span><span class="p">));</span><br /><span class="nt">&lt;/script&gt;</span><br />&nbsp;<br /><span class="nt">&lt;style&gt;</span><br /><span class="c">/* .. and write CSS accordingly */</span><br /><span class="nc">.logged</span> <span class="nf">#login-box</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span><br /><span class="nt">&lt;/style&gt;</span><br /></pre></div><br /></div>

<p>
    Whenever you call `head.feature()` your CSS rules will follow. 
</p>

<pre><code>
</code></pre>
<h2>CSS router</h2>
<p>Target CSS for specific paths and pages</p>
<div class="code"><div class="highlight"><pre><span class="c">/* CSS targeted for home page only */</span><br /><span class="nf">#index-page</span><span class="nc">.root-section</span> <span class="p">{</span>  <br />&nbsp;<br /><span class="p">}</span><br />   <br /><span class="c">/* make sidebar visible under /plugins  */</span>   <br /><span class="nc">.plugins-section</span> <span class="nf">#sidebar</span> <span class="p">{</span> <span class="k">display</span><span class="o">:</span> <span class="k">block</span><span class="p">;</span> <span class="p">}</span><br /></pre></div><br /></div>

<h2>Browser detector</h2>
<p>All browsers are detected but we all love IE</p>
<div class="code"><div class="highlight"><pre><span class="c">/* older than IE9 */</span><br /><span class="nc">.lt-ie9</span> <span class="nc">.box</span> <span class="p">{</span> <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="p">}</span><br />&nbsp;<br /><span class="c">/* CSS fixes for IE6 */</span><br /><span class="nc">.ie6</span> <span class="nt">ul</span>  <span class="p">{</span> <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span><br /></pre></div><br /></div>

<p>It's generally wiser to use feature detection IE is a feature in itself.</p>
<h2>JavaScript feature detection</h2>
<p>Every feature can also be found on the <code>head</code> (default) JavaScript variable.</p>
<div class="code"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">head</span><span class="p">.</span><span class="nx">logged</span><span class="p">)</span> <span class="p">{</span><br />   <span class="c1">// do things</span><br /><span class="p">}</span><br /></pre></div><br /></div>

</section>

<h1>Theory</h1>
<section id="theory">

<h2>Head JS script loader</h2>
<p>With Head JS your scripts load like images - completely separated from the page rendering process. The page is ready sooner. Always. This is guaranteed even with a single combined JavaScript file. See it yourself:</p>
<p><a href="test/script.html">Sample page with 5 SCRIPT SRC tags</a></p>
<p><a href="test/headjs.html">Same scripts loaded with Head JS</a></p>
<p>Non-blocking loading is the key to fast pages. Moreover Head JS loads scripts in <em>parallel</em> no matter how many of them and what the browser is. The speed difference can be dramatic especially on the initial page load when the scripts are not yet in cache. It's your crucial first impression.</p>
<p>Pages no longer "hang" and there is less or zero "flashing" between pages. User only cares when the page is ready. Unfortunately current networking tools don't highlight this crucial point. They focus on the overall loading of assets instead.</p>
<p>Head JS can make your pages load 100% or even 400% faster. It can make the largest impact on client side optimization.</p>
<h2>SCRIPT SRC</h2>
<p>This is from Apple.com's HEAD:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/lib/prototype.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/lib/scriptaculous.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/browserdetect.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/apple_core.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/search_decorator.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/global/scripts/promomanager.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/home/scripts/ticker.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;http://images.apple.com/home/scripts/promotracker.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /></pre></div><br /></div>

<p>All these scripts <em>block</em> the page. The page needs to wait for these to be loaded until it starts rendering itself. This is how majority of web sites are done. There is <strong>not</strong> a large difference whether the script tags are placed on top or on bottom of the page. On both cases the scripts must be loaded first. <a href="test/script.html">Compare it yourself</a>.</p>
<p>With older generation browsers the scripts will be loaded sequentially. Here is a screenshot from Firefox 3.0. </p>
<p><img alt="sequential downloading of scripts" src="media/img/serial-load.gif" /></p>
<p>It's easy to understand that this is poison for performance. The single best optimization technique for script loading is to use a non-blocking and paraller script loader such as Head JS.</p>
<h2>Combining scripts</h2>
<p>There is a common misbelief that a single combined script performs best. Wrong: </p>
<ul>
<li>
<p>latest browsers and Head JS can load scripts in parallel. loading 3 parts in parallel 
  instead of as a single chunk is usually faster. </p>
</li>
<li>
<p>if an individual file is changed the whole combination changes and you loose the benefits of caching. 
  it's better to combine only the stable files that doesn't change often.</p>
</li>
<li>
<p>many popular libraries are hosted on CDN. you should take the advantage of it instead of hosting yourself</p>
</li>
<li>
<p><a href="http://www.phpied.com/iphone-caching/">iPhone 3.x</a> cannot cache files larger than <strong>15kb</strong> and in iPhone 4 the limit is <strong>25kb</strong>. And this is the size before gzipping. if you care about iPhones you should respect these limits.<br />
</p>
</li>
</ul>
<p>With Head JS the file amount is not <em>as</em> critical as it is with SCRIPT SRC because page rendering is not blocked. Combining scripts is an important optimization method but you can go too far with it.</p>
<h2>Page styling and CSS</h2>
<p>Stylesheets needs to be <a href="http://developer.yahoo.com/performance/rules.html#css_top">on top</a>. An included script in the HEAD is the only place where a script is executed before the stylesheets are loaded and where it can give a helping hand for the CSS developer. Head JS takes this important role seriously and gives you following possibilities:</p>
<ul>
<li>use the latest CSS3 techniques and provide alternate CSS for IE and other old school browsers</li>
<li>safely use HTML5 tags even with IE</li>
<li>target CSS for specific screen widths, browsers and URLs</li>
<li>style your pages differently depending on the application state, such as whether user is logged or not</li>
</ul>
<p>Essentially Head JS adds CSS class names to the <code>&lt;html&gt;</code> element. If you attempt to do this in a script that is loaded with Head JS you can see a "Flash of Unstyled Content" (FOUC) effect: the page is first rendered without the to-be-loaded style definitions and then re-rendered when the scripts are executed. This is why the CSS feature detection is a core part of Head JS. </p>
<p>A script in HEAD blocks so it must be small. This is the essence of Head JS. It weights only 2.5 kb when minified and gzipped. It's preferred to load the file from a CDN. Google: I'm <a href="http://code.google.com/p/google-ajax-apis/issues/detail?id=548">staring at You</a>! (please give it a star)</p>
<p><em>Note: As crazy as it sounds FUBC and FOUC are not my acronyms.</em></p>
</section>

<h1>Usage</h1>
<section id="usage">

<h2>Script loading and execution</h2>
<p>All script loading is done with <code>head.js()</code> </p>
<div class="code"><div class="highlight"><pre><span class="c1">// the most simple case. load and execute single script without blocking. </span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;/path/to/file.js&quot;</span><span class="p">);</span><br />&nbsp;<br /><span class="c1">// load a script and execute a function after it has been loaded</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;/path/to/file.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br /><span class="p">});</span><br />&nbsp;<br /><span class="c1">// load files in parallel but execute them in sequence</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file1.js&quot;</span><span class="p">,</span> <span class="s2">&quot;file2.js&quot;</span><span class="p">,</span> <span class="p">...</span> <span class="s2">&quot;fileN.js&quot;</span><span class="p">);</span><br />&nbsp;<br /><span class="c1">// execute function after all scripts have been loaded</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file1.js&quot;</span><span class="p">,</span> <span class="s2">&quot;file2.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br /><span class="p">});</span><br />&nbsp;<br /><span class="c1">// files are loaded in parallel and executed in order they arrive</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file1.js&quot;</span><span class="p">);</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file2.js&quot;</span><span class="p">);</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file3.js&quot;</span><span class="p">);</span><br />&nbsp;<br /><span class="c1">// the previous can also be written as </span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file1.js&quot;</span><span class="p">).</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file1.js&quot;</span><span class="p">).</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;file3.js&quot;</span><span class="p">);</span><br /></pre></div><br /></div>

<h3>DOM Ready</h3>
<p>With <code>head.js()</code> call your page can be ready before your scripts. You need to prepare for that</p>
<ul>
<li>
<p>The "DOM ready" event such as <code>$(document).ready()</code> is already fired when the scripts arrive. 
  If the loaded scripts depend on that event make sure your library can handle this. jQuery 1.4+ works.<br />
</p>
</li>
<li>
<p>If your scripts modify the page you can see a "flash of unbehaviored content" effect (FUBC):
  a quick glimpse of unmodified HTML before the loaded scripts act on it. You can avoid this by initially hiding 
  the modifiable elements before your scripts make them visible and do their job.</p>
</li>
<li>
<p><code>document.write()</code> statements are not supported since it's hard or impossible to know where to write to. 
    It's a bad programming habit anyway so it's likely that Head JS will never support this.</p>
</li>
</ul>
<h3>Enable caching</h3>
<p>Make sure that the files loaded with head.js can be cached. For example:</p>
<p><img alt="file caching with future expiration header" src="media/img/expires-header.gif" /></p>
<p>This Google Analytics script will be served from browser's cache after the initial load. A proper max-age header configuration on the web server does the trick. If you care about performance this is a good habit for every JavaScript file. Not only with head.js.</p>
<p>Internally Head JS uses browser's cache to preload scripts before they are executed. This trick is used on Chrome, Safari and IE. Without caching enabled a file will be <em>loaded twice</em> on the initial load. There are no issues on Firefox and Opera because they execute files on the order they are programmatically inserted on the page.</p>
<h2>Script organization</h2>
<p>Call a function after all scripts have been loaded <em>and</em> the document is scriptable </p>
<div class="code"><div class="highlight"><pre><span class="nx">head</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br /><span class="p">});</span><br /></pre></div><br /></div>

<p>The functions supplied this way are executed in the same order as they are given.</p>
<div class="code"><div class="highlight"><pre><span class="c1">// call a function after a particular file has been loaded</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="s2">&quot;file2.js&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br /><span class="p">});</span><br /></pre></div><br /></div>

<p>This makes sense if you have large script files and want to execute JavaScript before all files are loaded.
Otherwise you simply use <code>head.ready()</code> which gets executed after all files are loaded.</p>
<div class="code"><div class="highlight"><pre><span class="c1">// a handy shortcut for head.ready()</span><br /><span class="nx">head</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br /><span class="p">});</span><br /></pre></div><br /></div>

<h2>Labeling scripts</h2>
<p>By assigning labels the content developers need not to know the actual file paths.</p>
<div class="code"><div class="highlight"><pre><span class="c1">// call a function immediately after jQuery Tools is loaded</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="s2">&quot;tools&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />   <br />   <span class="c1">// setup Tooltips</span><br />   <span class="nx">$</span><span class="p">(</span><span class="s2">&quot;.tip&quot;</span><span class="p">).</span><span class="nx">tooltip</span><span class="p">();</span><br />   <br /><span class="p">});</span><br />&nbsp;<br /><span class="c1">// load scripts by assigning a label for them</span><br /><span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><br />   <span class="p">{</span><span class="nx">jquery</span><span class="o">:</span> <span class="s2">&quot;http://http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js&quot;</span><span class="p">},</span><br />   <span class="p">{</span><span class="nx">tools</span><span class="o">:</span> <span class="s2">&quot;http://cnd.jquerytools.org/1.2.5/tiny/jquery.tools.min&quot;</span><span class="p">},</span><br />   <span class="p">{</span><span class="nx">heavy</span><span class="o">:</span> <span class="s2">&quot;http://a.heavy.library/we/dont/want/to/wait/for.js&quot;</span><span class="p">},</span><br />&nbsp;<br />   <span class="c1">// label is optional    </span><br />   <span class="s2">&quot;http://can.be.mixed/with/unlabeled/files.js&quot;</span><br /><span class="p">);</span><br /></pre></div><br /></div>

<p>If label is not given then the file name without the path is used as the key. On the jQuery library above this would be just "jquery.min.js".</p>
<h2>CSS3 feature detection</h2>
<p>When a particular feature is supported a corresponding class name is added to the <code>&lt;html&gt;</code> element. 
When a feature is not supported the class name is prefixed with <code>no-</code>. For example:</p>
<div class="code"><div class="highlight"><pre><span class="nc">.borderimage</span> <span class="nc">.box</span> <span class="p">{</span><br />   <span class="c">/* style for browsers that support border images */</span><br /><span class="p">}</span><br />&nbsp;<br /><span class="nc">.no-borderimage</span> <span class="nc">.box</span> <span class="p">{</span><br />   <span class="c">/* style for browsers that does not support border images */</span><br /><span class="p">}</span><br /></pre></div><br /></div>

<p>On everyday CSS work you assume that a feature exists and code your CSS accordingly and you later add
support for older browsers with the aid of "no-" classes.</p>
<h3>CSS3 property list</h3>
<p>Natively detected CSS3 properties</p>
<ul>
<li><a href="http://www.css3.info/preview/border-image/">borderimage</a> define an image to be used instead of the normal border of an element</li>
<li><a href="http://www.css3.info/preview/border-radius/">borderradius</a> support for rounded borders</li>
<li><a href="http://www.css3.info/preview/box-shadow/">boxshadow</a> a simple shadow for a box</li>
<li><a href="http://webkit.org/blog/182/css-reflections/">cssreflections</a> a reflection effect for an object</li>
<li><a href="rotate or skew boxes">csstransforms</a> ability to scale</li>
<li><a href="https://developer.mozilla.org/en/CSS/CSS_transitions">csstransitions</a> ability to animate changes to CSS properties</li>
<li><a href="http://code.google.com/webfonts">fontface</a> ability to use custom fonts</li>
<li><a href="http://www.css3.info/preview/multiple-backgrounds/">multiplebgs</a> ability to define multiple background properties for a box</li>
<li><a href="http://www.css3.info/preview/opacity/">opacity</a> transparency support</li>
<li><a href="http://www.css3.info/preview/rgba/">rgba</a> allows to specify an opacity value for a color</li>
<li><a href="http://www.css3.info/preview/text-shadow/">textshadow</a> a simple shadow for a text</li>
</ul>
<p>You can detect more with <code>head.feature()</code> call. Here we detect HTML5 video support</p>
<div class="code"><div class="highlight"><pre><span class="nx">head</span><span class="p">.</span><span class="nx">feature</span><span class="p">(</span><span class="s2">&quot;video&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br /> <span class="kd">var</span> <span class="nx">tag</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s1">&#39;video&#39;</span><span class="p">);</span><br />    <span class="k">return</span> <span class="o">!!</span><span class="nx">tag</span><span class="p">.</span><span class="nx">canPlayType</span><span class="p">;</span>   <br /><span class="p">});</span><br /></pre></div><br /></div>

<p><a href="https://github.com/Modernizr/Modernizr/blob/master/modernizr.js">Modernizr</a> is a good source of tests. It's preferred to append the tests inside <code>head.min.js</code> file.</p>
<h2>HTML5 enabler</h2>
<p>Head JS adds HTML5 support for all browsers: </p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;style&gt;</span><br />   <span class="nt">article</span> <span class="p">{</span> <span class="k">text-shadow</span><span class="o">:</span><span class="m">0</span> <span class="m">0</span> <span class="m">1px</span> <span class="m">#ccc</span><span class="p">;</span> <span class="p">}</span><br /><span class="nt">&lt;/style&gt;</span><br />&nbsp;<br /><span class="c">&lt;!-- works in IE too --&gt;</span><br /><span class="nt">&lt;article&gt;</span><br />   <span class="nt">&lt;header&gt;&lt;/header&gt;</span><br />   <span class="nt">&lt;section&gt;&lt;/section&gt;</span><br />   <span class="nt">&lt;footer&gt;&lt;/footer&gt;</span><br /><span class="nt">&lt;/article&gt;</span><br /></pre></div><br /></div>

<h4>List of new tags</h4>
<ul>
<li><a href="http://developers.whatwg.org/text-level-semantics.html#the-abbr-element">abbr</a> an abbrevation</li>
<li><a href="http://developers.whatwg.org/sections.html#the-article-element">article</a> defines external content</li>
<li><a href="http://developers.whatwg.org/sections.html#the-aside-element">aside</a> defines some content aside from the content it is placed in</li>
<li><a href="http://developers.whatwg.org/video.html#audio">audio</a> defines sound, such as music or other audio streams.</li>
<li><a href="http://developers.whatwg.org/the-canvas-element.html#the-canvas-element">canvas</a> a container for javascript graphics</li>
<li><a href="http://developers.whatwg.org/interactive-elements.html#the-details-element">details</a> describe details about a document, or parts of a document</li>
<li><a href="http://developers.whatwg.org/grouping-content.html#the-figcaption-element">figcaption</a> contains a caption for the "figure" element</li>
<li><a href="http://developers.whatwg.org/grouping-content.html#the-figcaption-element">figure</a> stand-alone content, typically used to explain parts of a document</li>
<li><a href="http://developers.whatwg.org/sections.html#the-footer-element">footer</a> defines the footer of a section or document</li>
<li><a href="http://developers.whatwg.org/sections.html#the-header-element">header</a> defines the header of a section or document</li>
<li><a href="http://developers.whatwg.org/sections.html#the-hgroup-element">hgroup</a> defines the heading of a section or a document.</li>
<li><a href="http://developers.whatwg.org/text-level-semantics.html#the-mark-element">mark</a> tag defines marked or highlighted text</li>
<li><a href="http://developers.whatwg.org/the-button-element.html#the-meter-element">meter</a> for measurements with a known minimum and maximum value</li>
<li><a href="http://developers.whatwg.org/sections.html#the-nav-element">nav</a> a section intended for navigation</li>
<li><a href="http://developers.whatwg.org/the-button-element.html#the-output-element">output</a> defines different types of output, such as output written by a script</li>
<li><a href="http://developers.whatwg.org/the-button-element.html#the-progress-element">progress</a>display the progress of a time consuming function in JavaScript.</li>
<li><a href="http://developers.whatwg.org/sections.html#the-section-element">section</a> defines sections in a document such as chapters, headers, footers, or any other sections of the document.</li>
<li><a href="http://developers.whatwg.org/interactive-elements.html#the-summary-element">summary</a> contains a header for the "details" element</li>
<li><a href="http://html5doctor.com/the-time-element/">time</a> defines a time or a date, or both.</li>
<li><a href="http://developers.whatwg.org/video.html#video">video</a> defines video, such as a movie clip or other video streams  <br />
</li>
</ul>
<p>IE has problems printing HTML5 elements. You can fix that by loading a <a href="http://www.iecss.com/print-protector/">print protector</a> script on your page:</p>
<div class="code"><div class="highlight"><pre><span class="k">if</span> <span class="p">(</span><span class="nx">head</span><span class="p">.</span><span class="nx">browser</span><span class="p">.</span><span class="nx">ie</span><span class="p">)</span>  <span class="p">{</span><br />   <span class="nx">head</span><span class="p">.</span><span class="nx">js</span><span class="p">(</span><span class="s2">&quot;http://www.iecss.com/print-protector/javascript/iepp.1-6-2.min.js&quot;</span><span class="p">);</span>        <br /><span class="p">}</span><br /></pre></div><br /></div>

<h2>Screen size detection</h2>
<p>Target CSS for various screen sizes. For example</p>
<div class="code"><div class="highlight"><pre><span class="c">/* styling for screens with resolution less than 1024 pixels */</span><br /><span class="nc">.lt-1024</span> <span class="nf">#hero</span> <span class="p">{</span> <span class="k">background-image</span><span class="o">:</span><span class="p">(</span><span class="k">medium</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span> <span class="p">}</span><br />&nbsp;<br /><span class="c">/* styling for small mobile screens */</span><br /><span class="nc">.lt-640</span> <span class="nf">#hero</span> <span class="p">{</span> <span class="k">background-image</span><span class="o">:</span><span class="p">(</span><span class="n">small</span><span class="o">.</span><span class="n">jpg</span><span class="p">);</span> <span class="p">}</span><br /></pre></div><br /></div>

<p>Today most sites are optimized for <strong>1024px</strong> but with Head JS you can safely optimize for larger screens.
Start by designing to the largest screen and then add CSS rules for smaller ones. You can freely
decide the sizes you optimize for and the amount of them. By default Head JS watches following screen widths:</p>
<p><strong>320, 480, 640, 768, 800, 1024, 1280, 1440, 1680, 1920</strong></p>
<p>These are typical sizes for mobile phones, tablets and PC monitors. Here are sizes for Apple devices:</p>
<p>iPhone3: <strong>480 x 320</strong></p>
<p>iPhone4: <strong>960 x 640</strong></p>
<p>iPad:  <strong>1024 x 768</strong></p>
<p>screens: <strong>800+</strong></p>
<p>You can provide your own set of screen widths with head_conf variable:</p>
<div class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">head_conf</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">screens</span><span class="o">:</span> <span class="p">[</span><span class="mi">500</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">900</span><span class="p">]</span> <span class="p">};</span><br /></pre></div><br /></div>

<p>If you resize the browser window your CSS rules will be dynamically applied. </p>
<h2>Browser detection <a name="browser"></a></h2>
<p>Target CSS for a specific browser. For example</p>
<div class="code"><div class="highlight"><pre><span class="c">/* CSS for IE version 7 and below */</span><br /><span class="nc">.lt-ie8</span> <span class="nc">.box</span> <span class="p">{</span> <span class="k">padding</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span> <span class="p">}</span><br />&nbsp;<br /><span class="c">/* CSS for IE6 only */</span><br /><span class="nc">.ie6</span> <span class="nt">ul</span>  <span class="p">{</span> <span class="k">list-style</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span> <span class="p">}</span><br /></pre></div><br /></div>

<p>List of supported class names for various browsers</p>
<ul>
<li><code>ie</code> Internet Explorer</li>
<li><code>webkit</code> Webkit based browsers such as Safari and Chrome</li>
<li><code>opera</code> Opera</li>
<li><code>mozilla</code> Mozilla based browsers such as Firefox</li>
</ul>
<p>There are additional "less than" helper classes for IE. </p>
<div class="code"><div class="highlight"><pre><span class="o">//</span> <span class="nt">tweak</span> <span class="nt">CSS</span> <span class="nt">for</span> <span class="nt">IE</span> <span class="nt">versions</span> <span class="nt">5</span> <span class="nt">and</span> <span class="nt">below</span><br /><span class="nc">.ie-lt6</span> <span class="nt">li</span> <span class="p">{</span><br />   <span class="k">list-style-type</span><span class="o">:</span> <span class="k">circle</span><span class="p">;</span><br /><span class="p">}</span> <br /></pre></div><br /></div>

<p>Versions 3 - 10 are covered. It is best to avoid browser detection if you are able to do feature detection. Sometimes it's not possible especially when it comes to IE. </p>
<h2>CSS Routing <a name="routing"></a></h2>
<p>Say you are on a page: <code>http://mydomain.com/addons/node/router.html</code>. Following CSS selectors apply:</p>
<div class="code"><div class="highlight"><pre><span class="nc">.addons-section</span> <span class="p">{</span> <span class="p">}</span><br />&nbsp;<br /><span class="nc">.addons-node-section</span> <span class="p">{</span> <span class="p">}</span><br />&nbsp;<br /><span class="nf">#router-page</span> <span class="p">{</span> <span class="p">}</span><br /></pre></div><br /></div>

<p>For each given path you get CSS classes representing "folders" and an ID representing the page. The deeper your URL the more classes you'll get  An empty page is "#index-page" and the site root is ".root-section". NOTE: If you have an existing id assigned for the HTML element it will be <em>overwritten</em>. On this case you can place the id attribute for the BODY tag.</p>
<p>You can change the these suffixes with head_conf variable.</p>
<div class="code"><div class="highlight"><pre><span class="kd">var</span> <span class="nx">head_conf</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">section</span><span class="o">:</span> <span class="s1">&#39;-area&#39;</span><span class="p">,</span> <span class="nx">page</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">};</span><br /></pre></div><br /></div>

<p>Now the selectors are:</p>
<div class="code"><div class="highlight"><pre><span class="nc">.addons-area</span> <span class="p">{</span> <span class="p">}</span><br />&nbsp;<br /><span class="nc">.addons-node-area</span> <span class="p">{</span> <span class="p">}</span><br />&nbsp;<br /><span class="nf">#router</span> <span class="p">{</span> <span class="p">}</span><br /></pre></div><br /></div>

<h2>JavaScript feature detection <a name="global-var"></a></h2>
<p>Every feature can be found from th <code>head</code> global JavaScript variable. Here is a screenshot:</p>
<p><img alt="Head JS global JavaScript variable" src="media/img/global-var.gif" /></p>
</section>

<h1>API</h1>
<section id="api">

<h2>Method index</h2>
<h3>head.js(file1 ... fileN, [callback])</h3>
<p>Immediately loads given javascript files and and executes them in the <em>order</em> they are supplied. if the last argument is a function it is called after all files are loaded and executed. Each file is either a string representing relative or absolute path of a JavaScript file. </p>
<p>Alternatively each file can be given as an object taking a form: <code>{ label: file_path }</code>. The labels are a handy way to hide the actual file path from the content writers. See the <code>ready</code> method below.</p>
<h3>head.ready(callback)</h3>
<p>Executes the given callback after <em>all</em> JavaScript files have been loaded and the document is scriptable (DOM is ready). </p>
<h3>head.ready(path_or_label, callback)</h3>
<p>Execute the callback immediately after the given file or label is loaded and executed</p>
<h3>head(callback), head(path_or_label, callback)</h3>
<p>A convenience shortcut for head.ready</p>
<h3>head.ready("dom", callback)</h3>
<p>Executes the given callback when document is ready. This is identical to jQuery's <a href="http://api.jquery.com/ready/">.ready()</a> method. "dom" is a reserved label and cannot be used as a label for your own scripts.</p>
<h3>head.feature(name, flag)</h3>
<p>Enable or disable a feature. features are stored as a class name to <code>&lt;html&gt;</code> element and on global <code>head</code> variable. if the flag arguments evaluates to <code>true</code> a feature is enabled. Call this method in your HEAD before the stylesheets are loaded.</p>
<h2>Configuration</h2>
<p>HeadJS is configured with a global <code>head_conf</code> variable <em>before</em> the script is loaded. For example:</p>
<div class="code"><div class="highlight"><pre><span class="nt">&lt;script&gt;</span><br /><span class="kd">var</span> <span class="nx">head_conf</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">screens</span><span class="o">:</span> <span class="p">[</span><span class="mi">640</span><span class="p">,</span> <span class="mi">1024</span><span class="p">,</span> <span class="mi">1280</span><span class="p">,</span> <span class="mi">1680</span><span class="p">]</span> <span class="p">};</span><br /><span class="nt">&lt;/script&gt;</span><br />&nbsp;<br /><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/js/head.min.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span><br /></pre></div><br /></div>

<p>List of configuration variables</p>
<ul>
<li><code>head</code>    ability to change global variable name. default: "head". Set to "JS" and you can <code>JS.ready()</code> for example </li>
<li><code>screens</code> an array of screen sizes to watch for<br />
</li>
<li><code>section</code> a suffix for CSS class representing the current "folder". default: "-section"</li>
<li><code>page</code>    a suffix for CSS ID representing the current page. default: "-page"</li>
</ul>
</section>

<h1>Download</h1>
<section id="download">

<h2>Version 0.9</h2>
<ul>
<li><a href="https://github.com/headjs/headjs/raw/v0.9/dist/head.js">head.js</a> - source code</li>
<li><a href="https://github.com/headjs/headjs/raw/v0.9/dist/head.min.js">head.min.js</a> - minified version</li>
<li><a href="https://github.com/headjs/headjs/raw/v0.9/dist/head.load.min.js">head.load.min.js</a> - JavaScript loader only</li>
<li><a href="https://github.com/headjs/headjs">Github Repository</a> - all sources </li>
</ul>
<p>My (humble) goal is to have Head JS available on Google's CDN. This is only possible if you <a href="http://code.google.com/p/google-ajax-apis/issues/detail?id=548">give a star</a>.</p>
<hr />
<h3>What's new in 0.9</h3>
<ul>
<li>
<p>The biggest and greatest feature is that <code>head.ready()</code> and <code>head()</code> calls now wait for the document object model (DOM) to be ready. So you can safely start scripting your page with those calls. No need to load an external library such as jQuery to support this. </p>
</li>
<li>
<p>New API call 'head.ready("dom", callback) to know when DOM is ready. </p>
</li>
<li>
<p>Detection of custom fonts with "fontface" and "no-fontface" CSS class names</p>
</li>
<li>
<p>Bug fixes. Full list of commits can be found <a href="https://github.com/headjs/headjs/commits/master">here</a></p>
</li>
</ul>
<p>This is the final release before the official 1.0. Please <a href="https://github.com/headjs/headjs/issues">report</a> all issues you find. </p>
<h3>Issues</h3>
<p>There is no way to detect if script loading failed in IE. For that reason a feature such as <code>head.error()</code> is impossible to implement. When a script URL cannot be accessed Head JS is silent.</p>
<h2>Future</h2>
<p>Head JS is rapidly being adopted to large number of websites all the time. A quick <a href="http://twitter.com/search?q=headjs">Twitter search</a> reveals that it's becoming a core client side development tool for many. For the same reason I also get a lot of feature requests. Right now the strategy is to keep Head JS as minimalistic as it is now. </p>
<p>Expect <em>not</em> to see extensive CSS3 feature detection, dynamic CSS loading or more complex JS loading developed. These can be build on <em>top</em> of Head JS. A separate module or extension. If you have an idea pleace consider this first.
</section></p>
		</div>
		
	</div>

	<footer>
		<a href="http://cloudpanic.com/about.html">Author: <strong>Tero Piirainen</strong></a> &bull;
		<a href="http://twitter.com/headjs/">Head JS @ Twitter</a> &bull;		
		<a href="https://github.com/headjs/headjs/issues">report a bug</a>
	</footer>
				
	<script>	
	
		head.js("http://www.google-analytics.com/ga.js", function() {		 
			var tracker = _gat._getTracker("UA-20001309-1");
			tracker._trackPageview();		 
		});
		
	</script>
	
</body>

</html>


